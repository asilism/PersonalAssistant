<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Assistant - Orchestration Service</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¤– Personal Assistant - Orchestration Service</h1>
            <p class="subtitle">LangGraph-based orchestration with MCP agent integration</p>
        </div>

        <div class="tabs">
            <div class="tab active" onclick="switchTab('manual')">ğŸ“ Manual Request</div>
            <div class="tab" onclick="switchTab('settings')">âš™ï¸ LLM Settings</div>
            <div class="tab" onclick="switchTab('mcp')">ğŸ”Œ MCP Servers</div>
        </div>

        <!-- Manual Testing Tab -->
        <div id="manual-tab" class="tab-content active">
            <div class="main-content">
                <div class="card">
                    <h2>ğŸ“ Make a Request</h2>
                    <form id="requestForm">
                        <div class="form-group">
                            <label for="requestText">Request</label>
                            <textarea id="requestText" placeholder="Enter your request here..." required></textarea>
                        </div>

                        <div class="form-group">
                            <label for="userId">User ID</label>
                            <input type="text" id="userId" value="test_user" required>
                        </div>

                        <div class="form-group">
                            <label for="tenant">Tenant</label>
                            <input type="text" id="tenant" value="test_tenant" required>
                        </div>

                        <button type="submit" id="submitBtn">Execute Request</button>
                    </form>

                    <div class="examples">
                        <h3>ğŸ’¡ Quick Examples:</h3>
                        <button class="example-btn" onclick="setExample('Send an email to john@example.com about the meeting tomorrow')">ğŸ“§ Send Email</button>
                        <button class="example-btn" onclick="setExample('Create a calendar event for team meeting on Friday at 2 PM')">ğŸ“… Create Event</button>
                        <button class="example-btn" onclick="setExample('Search for issues assigned to me in Jira')">ğŸ« Search Jira</button>
                        <button class="example-btn" onclick="setExample('Calculate 25 * 8 + 150')">ğŸ”¢ Calculate</button>
                        <button class="example-btn" onclick="setExample('Search for latest AI news and write a brief report')">ğŸ“° RPA: News Report</button>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“Š Response</h2>
                    <div id="resultContainer">
                        <p style="color: #999; text-align: center; padding: 40px;">
                            Results will appear here after executing a request
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content">
            <div class="settings-container">
                <h2>âš™ï¸ LLM Settings</h2>
                <p style="color: #666; margin-bottom: 20px;">Configure your LLM provider and API credentials</p>

                <div class="settings-card">
                    <div class="form-group">
                        <label for="llmProvider">LLM Provider</label>
                        <select id="llmProvider" onchange="updateModelOptions()">
                            <option value="anthropic">Anthropic Claude</option>
                            <option value="openai">OpenAI GPT</option>
                            <option value="openrouter">OpenRouter</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="apiKey">API Key</label>
                        <input type="password" id="apiKey" placeholder="Enter your API key">
                        <small style="color: #666;">Your API key is encrypted and stored securely</small>
                    </div>

                    <div class="form-group">
                        <label for="baseUrl">Base URL (Optional)</label>
                        <input type="text" id="baseUrl" placeholder="Leave empty for default">
                        <small style="color: #666;">Override the default API endpoint URL</small>
                    </div>

                    <div class="form-group">
                        <label for="llmModel">Model</label>
                        <select id="llmModel">
                            <!-- Options will be populated based on provider -->
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="maxRetries">Max Retries</label>
                        <input type="number" id="maxRetries" value="3" min="1" max="10">
                        <small style="color: #666;">Maximum number of retry attempts</small>
                    </div>

                    <div class="form-group">
                        <label for="timeout">Timeout (ms)</label>
                        <input type="number" id="timeout" value="30000" min="5000" step="1000">
                        <small style="color: #666;">Request timeout in milliseconds</small>
                    </div>

                    <div class="settings-actions">
                        <button onclick="testConnection()" id="testBtn">ğŸ§ª Test Connection</button>
                        <button onclick="saveSettings()" id="saveBtn">ğŸ’¾ Save Settings</button>
                    </div>

                    <div id="settingsResult" class="settings-result">
                        <!-- Result messages will appear here -->
                    </div>
                </div>

                <div class="current-settings-card">
                    <h3>Current Settings</h3>
                    <div id="currentSettings">
                        <div class="loading">Loading...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- MCP Servers Tab -->
        <div id="mcp-tab" class="tab-content">
            <div class="settings-container">
                <h2>ğŸ”Œ MCP Server Settings</h2>
                <p style="color: #666; margin-bottom: 20px;">Configure your MCP servers</p>

                <div class="settings-card">
                    <h3>Add/Update MCP Server</h3>

                    <div class="form-group">
                        <label for="mcpServerName">Server Name</label>
                        <input type="text" id="mcpServerName" placeholder="e.g., mail_agent">
                    </div>

                    <div class="form-group">
                        <label for="mcpEnabled">Enabled</label>
                        <select id="mcpEnabled">
                            <option value="true">Yes</option>
                            <option value="false">No</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="mcpCommand">Command</label>
                        <input type="text" id="mcpCommand" value="fastmcp" placeholder="fastmcp">
                        <small style="color: #666;">Command to execute (usually 'fastmcp')</small>
                    </div>

                    <div class="form-group">
                        <label for="mcpArgs">Arguments (JSON Array)</label>
                        <textarea id="mcpArgs" placeholder='["run", "path/to/server.py"]' rows="3"></textarea>
                        <small style="color: #666;">Arguments as JSON array</small>
                    </div>

                    <div class="form-group">
                        <label for="mcpEnvVars">Environment Variables (JSON Object)</label>
                        <textarea id="mcpEnvVars" placeholder='{"KEY": "value"}' rows="3"></textarea>
                        <small style="color: #666;">Environment variables as JSON object (optional)</small>
                    </div>

                    <div class="settings-actions">
                        <button onclick="saveMCPServer()" id="saveMCPBtn">ğŸ’¾ Save MCP Server</button>
                    </div>

                    <div id="mcpResult" class="settings-result">
                        <!-- Result messages will appear here -->
                    </div>
                </div>

                <div class="current-settings-card">
                    <h3>Current MCP Servers</h3>
                    <div id="currentMCPServers">
                        <div class="loading">Loading...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
